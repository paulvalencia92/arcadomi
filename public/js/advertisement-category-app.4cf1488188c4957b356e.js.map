{"version":3,"sources":["webpack:///./resources/js/src/views/Comunication/AdvertisementCategory/CategoryApp.vue?5618","webpack:///resources/js/src/views/Comunication/AdvertisementCategory/FormCategory.vue","webpack:///./resources/js/src/views/Comunication/AdvertisementCategory/FormCategory.vue?5efd","webpack:///./resources/js/src/views/Comunication/AdvertisementCategory/FormCategory.vue","webpack:///./resources/js/src/views/Comunication/AdvertisementCategory/FormCategory.vue?9333","webpack:///resources/js/src/views/Comunication/AdvertisementCategory/CategoryApp.vue","webpack:///./resources/js/src/views/Comunication/AdvertisementCategory/CategoryApp.vue?d3ec","webpack:///./resources/js/src/views/Comunication/AdvertisementCategory/CategoryApp.vue","webpack:///./resources/js/src/assets/images/user/user-11.png","webpack:///./resources/js/src/assets/images/page-img/37.png"],"names":["name","props","created","this","imagePreview","clone","image","data","optionsPermissions","methods","onSubmit","get","updateAdvertisementCategories","then","createAdvertisementCategories","previewImage","category","file","event","target","files","input","reader","onload","readAsDataURL","buildFormData","prop","formData","append","getImagePreview","computed","_vm","_h","$createElement","_c","_self","scopedSlots","_u","key","fn","ref","handleSubmit","attrs","on","$event","preventDefault","errors","_e","_v","staticClass","class","length","model","value","callback","$$v","$set","expression","_s","staticStyle","getAdvertisementCategories","components","FormCategory","permission","description","modalTitle","fields","showModalCreateAdvertisementCategory","showModalEditAdvertisementCategory","showModalDeleteAdvertisementCategory","$bvModal","msgBoxConfirm","buttonSize","okVariant","okTitle","cancelTitle","hideHeaderClose","centered","mounted","proxy","directives","rawName","modifiers","advertisementCategories","item","id","module","exports"],"mappings":"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","file":"js/advertisement-category-app.4cf1488188c4957b356e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"\"}},[_c('iq-card',{scopedSlots:_vm._u([{key:\"headerTitle\",fn:function(){return [_c('i',{staticClass:\"ri-user-settings-line mr-2 text-success\"}),_vm._v(\" \"),_c('span',[_vm._v(\"Categorías\")])]},proxy:true},{key:\"headerAction\",fn:function(){return [_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.form-advertisement-category\",modifiers:{\"form-advertisement-category\":true}}],attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.showModalCreateAdvertisementCategory}},[_vm._v(\"\\n        Crear categoría\\n      \")])]},proxy:true}])}),_vm._v(\" \"),(_vm.advertisementCategories.length)?_c('iq-card',{scopedSlots:_vm._u([{key:\"body\",fn:function(){return [_c('b-table',{attrs:{\"fields\":_vm.fields,\"items\":_vm.advertisementCategories,\"responsive\":\"\"},scopedSlots:_vm._u([{key:\"cell(actions)\",fn:function(data){return [_c('b-dropdown',{staticClass:\"m-md-2\",attrs:{\"variant\":\"primary\",\"id\":\"accion-unit\",\"text\":\"Acciones\"}},[_c('b-dropdown-item',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.form-advertisement-category\",modifiers:{\"form-advertisement-category\":true}}],attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return _vm.showModalEditAdvertisementCategory(data.item)}}},[_c('i',{staticClass:\"ri-edit-box-line\"}),_vm._v(\"\\n              Editar\\n            \")]),_vm._v(\" \"),_c('b-dropdown-item',{attrs:{\"variant\":\"danger\"},on:{\"click\":function($event){return _vm.showModalDeleteAdvertisementCategory(data.item.id)}}},[_c('i',{staticClass:\"fa fa-trash\"}),_vm._v(\" Eliminar\\n            \")])],1)]}}],null,false,2335913851)})]},proxy:true}],null,false,3497395842)}):_vm._e(),_vm._v(\" \"),_c('b-modal',{attrs:{\"id\":\"form-advertisement-category\",\"centered\":\"\",\"size\":\"lg\",\"title\":_vm.modalTitle,\"hide-footer\":\"\"}},[_c('form_category',{attrs:{\"category\":_vm.category,\"image\":_vm.imagePreview}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ValidationObserver v-slot=\"{ handleSubmit }\">\r\n    <b-form @submit.prevent=\"handleSubmit(onSubmit)\" enctype=\"multipart/form-data\">\r\n\r\n      <!--errors-->\r\n      <card-errors v-if=\"errors.length\"/>\r\n\r\n      <b-form-group class=\"form-group\" label=\"Nombre\" label-for=\"name\">\r\n        <ValidationProvider name=\"nombre del bloque\" rules=\"required\" v-slot=\"{ errors }\">\r\n          <b-form-input v-model=\"category.name\" id=\"name\"\r\n                        :class=\"(errors.length > 0 ? ' is-invalid' : '')\"></b-form-input>\r\n          <div class=\"invalid-feedback\">\r\n            <span>{{ errors[0] }}</span>\r\n          </div>\r\n        </ValidationProvider>\r\n      </b-form-group>\r\n\r\n\r\n      <b-form-group label=\"Permisos\" label-for=\"optionsPermissions\">\r\n        <ValidationProvider name=\"permisos\" rules=\"required\" v-slot=\"{ errors }\">\r\n          <b-form-select plain v-model=\"category.permission\" :options=\"optionsPermissions\" id=\"optionsPermissions\"\r\n                         :class=\"(errors.length > 0 ? ' is-invalid' : '')\">\r\n          </b-form-select>\r\n          <div class=\"invalid-feedback\">\r\n            <span>{{ errors[0] }}</span>\r\n          </div>\r\n        </ValidationProvider>\r\n      </b-form-group>\r\n\r\n\r\n      <div class=\"form-group\">\r\n        <label class=\"d-block\" for=\"description\">Descripción - <span\r\n            class=\"text-sm-left text-muted font-italic\">opcional</span></label>\r\n        <b-form-textarea\r\n            id=\"description\"\r\n            v-model=\"category.description\"\r\n            rows=\"3\"\r\n            max-rows=\"6\">\r\n        </b-form-textarea>\r\n      </div>\r\n\r\n\r\n      <b-form-group class=\"mt-3\">\r\n        <div class=\"add-img-user profile-img-edit\">\r\n          <b-img\r\n              class=\"profile-pic height-150 width-150\"\r\n              fluid\r\n              :src=\"getImagePreview()\"\r\n              alt=\"profile-pic\"/>\r\n          <div class=\"p-image\">\r\n            <b-button size=\"sm\"\r\n                      variant=\"outline-primary\">\r\n              <input\r\n                  type=\"file\"\r\n                  @change=\"previewImage\"\r\n                  class=\"h-100 position-absolute\"\r\n                  accept=\"image/*\"\r\n                  style=\"opacity: 0;\"/>\r\n              Subir imagen\r\n            </b-button>\r\n          </div>\r\n        </div>\r\n      </b-form-group>\r\n\r\n\r\n      <b-form-group class=\"mt-4 text-right\">\r\n        <hr>\r\n        <b-button variant=\"primary\" type=\"submit\">Guardar</b-button>\r\n      </b-form-group>\r\n    </b-form>\r\n  </ValidationObserver>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions, mapState} from \"vuex\";\r\nimport {core} from \"../../../config/pluginInit\";\r\n\r\nexport default {\r\n  name: \"FormCategory\",\r\n  props: ['category', 'modalTitle', 'image'],\r\n  created() {\r\n    this.imagePreview = clone(this.image);\r\n  },\r\n  data() {\r\n    return {\r\n      optionsPermissions: [\r\n        {text: 'Libre: Los residentes pueden publicar libremente.', value: 1},\r\n        {text: 'Administrado: Los residentes pueden publicar y el administrador debe aprobar.', value: 2},\r\n        {text: 'Solo administrador: Solo el administrador puede publicar.', value: 3},\r\n      ],\r\n      imagePreview: '',\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions('AdvertisementCategory', ['createAdvertisementCategories', 'updateAdvertisementCategories']),\r\n    onSubmit() {\r\n      const data = this.buildFormData();\r\n      if (data.get('id')) {\r\n        this.updateAdvertisementCategories(data).then(response => {\r\n          core.showSnackbar(\"success\", \"La categoria ha sido actualizada con éxito.\");\r\n          this.$bvModal.hide('form-advertisement-category');\r\n        })\r\n      } else {\r\n        this.createAdvertisementCategories(data).then(response => {\r\n          core.showSnackbar(\"success\", \"La categoria ha sido creado con éxito.\");\r\n          this.$bvModal.hide('form-advertisement-category');\r\n        });\r\n\r\n      }\r\n    },\r\n    previewImage: function (event) {\r\n      this.category.file = event.target.files[0];\r\n      const input = event.target;\r\n      if (input.files && input.files[0]) {\r\n        const reader = new FileReader();\r\n        reader.onload = e => {\r\n          this.imagePreview = e.target.result;\r\n        };\r\n        reader.readAsDataURL(input.files[0]);\r\n      }\r\n    },\r\n    buildFormData() {\r\n      const formData = new FormData();\r\n      for (let prop in this.category) {\r\n        if (this.category[prop] != '' && this.category[prop] != null) {\r\n          formData.append(prop, this.category[prop])\r\n        }\r\n      }\r\n      return formData;\r\n    },\r\n    getImagePreview() {\r\n      let urlImage = '';\r\n      if (this.imagePreview) {\r\n        urlImage = this.imagePreview;\r\n      } else if (this.category.image) {\r\n        urlImage = `/storage/advertisement_categories/${this.category.image}`;\r\n      } else {\r\n        urlImage = require(\"../../../assets/images/user/user-11.png\");\r\n      }\r\n      return urlImage;\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['errors']),\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormCategory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormCategory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FormCategory.vue?vue&type=template&id=5f1ed4e0&scoped=true&\"\nimport script from \"./FormCategory.vue?vue&type=script&lang=js&\"\nexport * from \"./FormCategory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f1ed4e0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ValidationObserver',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('b-form',{attrs:{\"enctype\":\"multipart/form-data\"},on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.onSubmit)}}},[(_vm.errors.length)?_c('card-errors'):_vm._e(),_vm._v(\" \"),_c('b-form-group',{staticClass:\"form-group\",attrs:{\"label\":\"Nombre\",\"label-for\":\"name\"}},[_c('ValidationProvider',{attrs:{\"name\":\"nombre del bloque\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('b-form-input',{class:(errors.length > 0 ? ' is-invalid' : ''),attrs:{\"id\":\"name\"},model:{value:(_vm.category.name),callback:function ($$v) {_vm.$set(_vm.category, \"name\", $$v)},expression:\"category.name\"}}),_vm._v(\" \"),_c('div',{staticClass:\"invalid-feedback\"},[_c('span',[_vm._v(_vm._s(errors[0]))])])]}}],null,true)})],1),_vm._v(\" \"),_c('b-form-group',{attrs:{\"label\":\"Permisos\",\"label-for\":\"optionsPermissions\"}},[_c('ValidationProvider',{attrs:{\"name\":\"permisos\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nreturn [_c('b-form-select',{class:(errors.length > 0 ? ' is-invalid' : ''),attrs:{\"plain\":\"\",\"options\":_vm.optionsPermissions,\"id\":\"optionsPermissions\"},model:{value:(_vm.category.permission),callback:function ($$v) {_vm.$set(_vm.category, \"permission\", $$v)},expression:\"category.permission\"}}),_vm._v(\" \"),_c('div',{staticClass:\"invalid-feedback\"},[_c('span',[_vm._v(_vm._s(errors[0]))])])]}}],null,true)})],1),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"d-block\",attrs:{\"for\":\"description\"}},[_vm._v(\"Descripción - \"),_c('span',{staticClass:\"text-sm-left text-muted font-italic\"},[_vm._v(\"opcional\")])]),_vm._v(\" \"),_c('b-form-textarea',{attrs:{\"id\":\"description\",\"rows\":\"3\",\"max-rows\":\"6\"},model:{value:(_vm.category.description),callback:function ($$v) {_vm.$set(_vm.category, \"description\", $$v)},expression:\"category.description\"}})],1),_vm._v(\" \"),_c('b-form-group',{staticClass:\"mt-3\"},[_c('div',{staticClass:\"add-img-user profile-img-edit\"},[_c('b-img',{staticClass:\"profile-pic height-150 width-150\",attrs:{\"fluid\":\"\",\"src\":_vm.getImagePreview(),\"alt\":\"profile-pic\"}}),_vm._v(\" \"),_c('div',{staticClass:\"p-image\"},[_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"outline-primary\"}},[_c('input',{staticClass:\"h-100 position-absolute\",staticStyle:{\"opacity\":\"0\"},attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.previewImage}}),_vm._v(\"\\n            Subir imagen\\n          \")])],1)],1)]),_vm._v(\" \"),_c('b-form-group',{staticClass:\"mt-4 text-right\"},[_c('hr'),_vm._v(\" \"),_c('b-button',{attrs:{\"variant\":\"primary\",\"type\":\"submit\"}},[_vm._v(\"Guardar\")])],1)],1)]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <b-container fluid>\r\n\r\n    <iq-card>\r\n      <template v-slot:headerTitle>\r\n        <i class=\"ri-user-settings-line mr-2 text-success\"></i>\r\n        <span>Categorías</span>\r\n      </template>\r\n      <template v-slot:headerAction>\r\n        <b-button variant=\"primary\" v-b-modal.form-advertisement-category @click=\"showModalCreateAdvertisementCategory\">\r\n          Crear categoría\r\n        </b-button>\r\n      </template>\r\n    </iq-card>\r\n\r\n\r\n    <iq-card v-if=\"advertisementCategories.length\">\r\n      <template v-slot:body>\r\n        <b-table :fields=\"fields\" :items=\"advertisementCategories\" responsive>\r\n          <template v-slot:cell(actions)=\"data\">\r\n            <b-dropdown variant=\"primary\" id=\"accion-unit\" text=\"Acciones\" class=\"m-md-2\">\r\n              <b-dropdown-item variant=\"primary\" v-b-modal.form-advertisement-category\r\n                               @click=\"showModalEditAdvertisementCategory(data.item)\"><i class=\"ri-edit-box-line\"/>\r\n                Editar\r\n              </b-dropdown-item>\r\n              <b-dropdown-item variant=\"danger\" @click=\"showModalDeleteAdvertisementCategory(data.item.id)\">\r\n                <i class=\"fa fa-trash\"/> Eliminar\r\n              </b-dropdown-item>\r\n            </b-dropdown>\r\n          </template>\r\n        </b-table>\r\n      </template>\r\n    </iq-card>\r\n\r\n    <!--============================\r\n        FORMULARIO CATEGORIA\r\n    ==============================-->\r\n    <b-modal id=\"form-advertisement-category\" centered size=\"lg\" :title=\"modalTitle\" hide-footer>\r\n      <form_category :category=\"category\" :image=\"imagePreview\"></form_category>\r\n    </b-modal>\r\n\r\n\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\nimport {core} from \"../../../config/pluginInit\";\r\nimport {mapActions, mapState} from \"vuex\";\r\nimport FormCategory from \"./FormCategory\";\r\nimport mapValues from 'lodash/mapValues';\r\n\r\nexport default {\r\n  name: \"CategoryApp\",\r\n  created() {\r\n    this.getAdvertisementCategories();\r\n  },\r\n  components: {\r\n    'form_category': FormCategory\r\n  },\r\n  data() {\r\n    return {\r\n      category: {\r\n        name: '',\r\n        permission: '',\r\n        description: '',\r\n        image: '',\r\n        file: '',\r\n      },\r\n      modalTitle: '',\r\n      imagePreview: require(\"../../../assets/images/page-img/37.png\"),\r\n      fields: [\r\n        {key: \"name\", label: 'Nombre', sortable: true},\r\n        {key: \"permissions\", label: 'Permisos', sortable: true},\r\n        {key: \"actions\", label: 'Acciones', sortable: true}\r\n      ],\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions('AdvertisementCategory', ['getAdvertisementCategories', 'deleteAdvertisementCategories']),\r\n    showModalCreateAdvertisementCategory() {\r\n      this.category = mapValues(this.category, () => '');\r\n      this.modalTitle = \"Crear categoria\";\r\n\r\n    },\r\n    showModalEditAdvertisementCategory(category) {\r\n      this.category = clone(category);\r\n      this.modalTitle = \"Editar categoria\";\r\n      this.imagePreview = null;\r\n    },\r\n    showModalDeleteAdvertisementCategory(categoryId) {\r\n      this.$bvModal.msgBoxConfirm('Esta seguro que desea eliminar la categoria ?', {\r\n        buttonSize: 'sm',\r\n        okVariant: 'danger',\r\n        okTitle: 'Eliminar',\r\n        cancelTitle: 'Cancelar',\r\n        hideHeaderClose: false,\r\n        centered: true\r\n      }).then(value => {\r\n        if (value) {\r\n          this.deleteAdvertisementCategories(categoryId).then(response => {\r\n            core.showSnackbar(\"success\", \"La categoria ha sido eliminada con éxito.\");\r\n          })\r\n        }\r\n      });\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('AdvertisementCategory', ['advertisementCategories'])\r\n  },\r\n  mounted() {\r\n    core.index();\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryApp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryApp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CategoryApp.vue?vue&type=template&id=6a201554&scoped=true&\"\nimport script from \"./CategoryApp.vue?vue&type=script&lang=js&\"\nexport * from \"./CategoryApp.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a201554\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"images/user-11.png?889f24898432556cb37f2241a522210a\";","module.exports = __webpack_public_path__ + \"images/37.png?53c74d1bcb72304b72c68c8fef9f7cbd\";"],"sourceRoot":""}