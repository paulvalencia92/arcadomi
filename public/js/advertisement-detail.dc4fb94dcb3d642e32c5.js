(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{148:function(e,t,i){var s=i(602);"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(13)(s,a);s.locals&&(e.exports=s.locals)},155:function(e,t,i){var s=i(689);"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(13)(s,a);s.locals&&(e.exports=s.locals)},156:function(e,t,i){var s=i(691);"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(13)(s,a);s.locals&&(e.exports=s.locals)},226:function(e,t,i){e.exports=i.p+"images/37.png?53c74d1bcb72304b72c68c8fef9f7cbd"},601:function(e,t,i){"use strict";var s=i(148);i.n(s).a},602:function(e,t,i){(t=i(7)(!1)).push([e.i,".ql-container.ql-snow[data-v-476fd59b]{min-height:120px!important}",""]),e.exports=t},687:function(e,t,i){e.exports=i.p+"images/07.jpg?d7e4e7603c76fc0e962329fddc6f2ac2"},688:function(e,t,i){"use strict";var s=i(155);i.n(s).a},689:function(e,t,i){(t=i(7)(!1)).push([e.i,".pointer[data-v-2f99b4b7]{cursor:pointer}",""]),e.exports=t},690:function(e,t,i){"use strict";var s=i(156);i.n(s).a},691:function(e,t,i){(t=i(7)(!1)).push([e.i,".card-img-top[data-v-675397bd]{width:100%;height:40vh;-o-object-fit:cover;object-fit:cover}",""]),e.exports=t},703:function(e,t,i){"use strict";i.r(t);var s=i(2),a=i(3);function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c={name:"CommentAdvertisement",data:function(){return{message:""}},methods:n(n({},Object(s.b)("Advertisement",["createComment","deleteCommentAdvertisement"])),{},{addComment:function(){var e=this;this.createComment({message:this.message,advertisementId:this.advertisement.id}).then((function(t){e.message=""}))},showModalDeleteCommentAdvertisement:function(e){var t=this;this.$bvModal.msgBoxConfirm("¿Estás seguro? ¡No podras recuperar el comentario eliminado!",{buttonSize:"sm",okVariant:"danger",okTitle:"Eliminar",cancelTitle:"Cancelar",hideHeaderClose:!1,centered:!0}).then((function(i){i&&t.deleteCommentAdvertisement(e).then((function(e){a.c.showSnackbar("success","El comentario ha sido eliminado con éxito.")}))}))}}),computed:n(n({},Object(s.e)("Auth",["user"])),Object(s.e)("Advertisement",["advertisement"]))},l=(i(688),i(0));function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach((function(t){u(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var v={name:"DetailAdvertisement",props:["id"],components:{"comment-advertisement":Object(l.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-card",{attrs:{title:"Comentarios"}},[i("b-row",[i("b-col",{attrs:{md:"2"}},[i("img",{staticClass:"rounded-circle",attrs:{width:"60",height:"60",src:e.user.image_profile}})]),e._v(" "),i("b-col",{attrs:{md:"10"}},[i("div",{staticClass:"form-group"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"rounded form-control",attrs:{type:"text",placeholder:"Escribe un comentario"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})])])],1),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col m-0 float-md-right pb-3"},[i("button",{staticClass:"btn btn-primary float-right",on:{click:function(t){return e.addComment()}}},[e._v("Enviar")])])]),e._v(" "),i("b-row",e._l(e.advertisement.comments,(function(t){return i("b-col",{key:t.id,staticClass:"mt-4",attrs:{md:"12"}},[i("b-row",[i("b-col",{attrs:{md:"2"}},[i("img",{staticClass:"rounded-circle",attrs:{width:"60",height:"60",src:t.user.image_profile}})]),e._v(" "),i("b-col",{attrs:{md:"10"}},[i("div",{staticClass:"media-support-info mt-2"},[i("h5",{staticClass:"mb-0"},[i("b-link",{attrs:{href:"#"}},[e._v(e._s(t.body))])],1),e._v(" "),i("p",{staticClass:"mb-0 text-secondary"},[e._v(e._s(e._f("formatDateToTime")(t.created_at)))]),e._v(" "),i("p",{staticClass:"mb-0 text-secondary"},[e._v("Autor: "+e._s(t.user.fullname)+"\n              "),t.user_id==e.user.id?i("i",{staticClass:"ri-delete-bin-7-fill ri-sm text-secondary pointer",on:{click:function(i){return e.showModalDeleteCommentAdvertisement(t.id)}}}):e._e()])])])],1)],1)})),1)],1)}),[],!1,null,"2f99b4b7",null).exports,"form-advertisement":i(94).a},data:function(){return{advertisementEdit:{},image:null}},created:function(){this.findArvertisement(this.id)},methods:d(d({},Object(s.b)("Advertisement",["findArvertisement","deleteAdvertisement"])),{},{showModalEditAdvertisement:function(e){this.advertisementEdit=clone(e)},showModalDeleteAdvertisement:function(e){var t=this;this.$bvModal.msgBoxConfirm("Esta seguro que desea eliminar el anuncio ?",{buttonSize:"sm",okVariant:"danger",okTitle:"Eliminar",cancelTitle:"Cancelar",hideHeaderClose:!1,centered:!0}).then((function(i){i&&t.deleteAdvertisement(e).then((function(e){a.c.showSnackbar("success","El anuncio ha sido eliminado con éxito."),t.$router.push({name:"comunication.advertisements"})}))}))}}),computed:d(d({},Object(s.e)("Auth",["user"])),Object(s.e)("Advertisement",["advertisement"])),mounted:function(){a.c.index()}},b=(i(690),Object(l.a)(v,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{attrs:{fluid:""}},[s("b-col",{attrs:{sm:"12"}},[s("b-card",{staticClass:"iq-mb-3",attrs:{title:e.advertisement.title,"img-src":i(687),"img-alt":"#","img-top":""}},[s("b-card-text",{domProps:{innerHTML:e._s(e.advertisement.description)}}),e._v(" "),s("b-card-text",[s("small",{staticClass:"text-muted"},[e._v("\n          publicado "+e._s(e._f("formatDate")(e.advertisement.created_at))+" "+e._s(e._f("formatDateToTime")(e.advertisement.created_at))+"\n        ")])])],1)],1),e._v(" "),e.user.id==e.advertisement.user_id?s("b-col",{staticClass:"iq-mb-3",attrs:{md:"12"}},[s("b-card",{attrs:{title:"Acciones"}},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.form-advertisement-category",modifiers:{"form-advertisement-category":!0}}],attrs:{variant:"primary"},on:{click:function(t){return e.showModalEditAdvertisement(e.advertisement)}}},[e._v("\n        Editar\n      ")]),e._v(" "),s("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.showModalDeleteAdvertisement(e.advertisement.id)}}},[e._v("Eliminar")])],1)],1):e._e(),e._v(" "),s("b-col",{attrs:{md:"12"}},[s("comment-advertisement")],1),e._v(" "),s("b-modal",{attrs:{id:"form-advertisement-category",centered:"",size:"xl",title:"Editar anuncio","hide-footer":""}},[s("form-advertisement",{attrs:{advertisement:e.advertisementEdit,image:e.image}})],1)],1)}),[],!1,null,"675397bd",null));t.default=b.exports},94:function(e,t,i){"use strict";var s=i(2),a=i(3);function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c={name:"FormAdvertisemenet",props:["advertisement","image"],created:function(){this.getAdvertisementCategories(),this.getBlocks(),this.imagePreview=clone(this.image)},data:function(){return{text:[{activeLabel:"On",inactiveLabel:"Off",label:"Primary",class:"primary",checked:!0}],editorOption:{placeholder:"Escribe lo que desees de interés aquí",modules:{toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{size:["small",!1,"large","huge"]}],[{align:[]}],["link","image","video"]],syntax:{highlight:function(e){return hljs.highlightAuto(e).value}}}},imagePreview:""}},methods:n(n(n(n({},Object(s.b)("AdvertisementCategory",["getAdvertisementCategories"])),Object(s.b)("Advertisement",["createAdvertisement","updateAdvertisement"])),Object(s.b)("Block",["getBlocks"])),{},{onSubmit:function(){var e=this,t=this.buildFormData();t.get("id")?this.updateAdvertisement(t).then((function(t){a.c.showSnackbar("success","El anuncio ha sido actualizado con éxito."),e.$bvModal.hide("form-advertisement-category")})):this.createAdvertisement(t).then((function(t){a.c.showSnackbar("success","El anuncio ha sido creado con éxito."),e.$router.push({name:"comunication.advertisements"})}))},getImagePreview:function(){return this.imagePreview?this.imagePreview:this.advertisement.image?"/storage/advertisements/".concat(this.advertisement.image):i(226)},previewImage:function(e){var t=this;this.advertisement.file=e.target.files[0];var i=e.target;if(i.files&&i.files[0]){var s=new FileReader;s.onload=function(e){t.imagePreview=e.target.result},s.readAsDataURL(i.files[0])}},buildFormData:function(){var e=new FormData;for(var t in this.advertisement)""!=this.advertisement[t]&&null!=this.advertisement[t]&&e.append(t,this.advertisement[t]);return e}}),computed:n(n(n(n({},Object(s.e)(["errors"])),Object(s.c)("AdvertisementCategory",["optionsCategories"])),Object(s.c)("Block",["optionsTypeBlock"])),{},{minDate:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t);return i.setMonth(i.getMonth()+0),i.setDate(e.getDate()),i}})},l=(i(601),i(0)),m=Object(l.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var s=t.handleSubmit;return[i("b-form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),s(e.onSubmit)}}},[i("b-row",[i("b-col",{attrs:{md:"12"}},[e.errors.length?i("card-errors"):e._e()],1),e._v(" "),i("b-form-group",{staticClass:"col-md-6",attrs:{label:"Titulo","label-for":"title"}},[i("ValidationProvider",{attrs:{name:"Titulo",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[i("b-form-input",{class:s.length>0?" is-invalid":"",attrs:{id:"title"},model:{value:e.advertisement.title,callback:function(t){e.$set(e.advertisement,"title",t)},expression:"advertisement.title"}}),e._v(" "),i("div",{staticClass:"invalid-feedback"},[i("span",[e._v(e._s(s[0]))])])]}}],null,!0)})],1),e._v(" "),i("b-form-group",{staticClass:"col-md-6",attrs:{label:"Categoría","label-for":"categories"}},[i("ValidationProvider",{attrs:{name:"permisos",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[i("b-form-select",{class:s.length>0?" is-invalid":"",attrs:{plain:"",options:e.optionsCategories,id:"categories"},model:{value:e.advertisement.advertisement_category_id,callback:function(t){e.$set(e.advertisement,"advertisement_category_id",t)},expression:"advertisement.advertisement_category_id"}}),e._v(" "),i("div",{staticClass:"invalid-feedback"},[i("span",[e._v(e._s(s[0]))])])]}}],null,!0)})],1),e._v(" "),i("div",{staticClass:"form-group col-md-6"},[i("label",{staticClass:"d-block",attrs:{for:"description"}},[e._v("Fecha de publicación -\n          "),i("span",{staticClass:"text-sm-left text-muted font-italic"},[e._v("opcional")])]),e._v(" "),i("b-form-datepicker",{staticClass:"mb-2",attrs:{locale:"es",size:"md",id:"example-datepicker",min:e.minDate},model:{value:e.advertisement.publication_date,callback:function(t){e.$set(e.advertisement,"publication_date",t)},expression:"advertisement.publication_date"}})],1),e._v(" "),i("div",{staticClass:"form-group col-md-6"},[i("label",{staticClass:"d-block",attrs:{for:"description"}},[e._v("Segmentar por bloques -\n          "),i("span",{staticClass:"text-sm-left text-muted font-italic"},[e._v("opcional")])]),e._v(" "),i("b-form-select",{attrs:{options:e.optionsTypeBlock,multiple:"","select-size":3,id:"blocks"},model:{value:e.advertisement.blocks_id,callback:function(t){e.$set(e.advertisement,"blocks_id",t)},expression:"advertisement.blocks_id"}})],1),e._v(" "),i("b-form-group",{staticClass:"col-md-3",attrs:{label:"Publicado","label-for":"title"}},[e._l(e.text,(function(t,s){return[i("div",{key:s,staticClass:"custom-control custom-switch custom-switch-text custom-control-inline custom-switch-color"},[i("div",{staticClass:"custom-switch-inner"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.advertisement.is_published,expression:"advertisement.is_published"}],staticClass:"custom-control-input",class:"bg-"+t.class,attrs:{type:"checkbox",id:"is_published"+s},domProps:{checked:Array.isArray(e.advertisement.is_published)?e._i(e.advertisement.is_published,null)>-1:e.advertisement.is_published},on:{change:function(t){var i=e.advertisement.is_published,s=t.target,a=!!s.checked;if(Array.isArray(i)){var r=e._i(i,null);s.checked?r<0&&e.$set(e.advertisement,"is_published",i.concat([null])):r>-1&&e.$set(e.advertisement,"is_published",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.advertisement,"is_published",a)}}}),e._v(" "),i("label",{staticClass:"custom-control-label",attrs:{for:"is_published"+s,"data-on-label":t.activeLabel,"data-off-label":t.inactiveLabel}})])])]}))],2),e._v(" "),i("b-form-group",{staticClass:"col-md-3",attrs:{label:"Destacado","label-for":"title"}},[e._l(e.text,(function(t,s){return[i("div",{key:s,staticClass:"custom-control custom-switch custom-switch-text custom-control-inline custom-switch-color"},[i("div",{staticClass:"custom-switch-inner"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.advertisement.is_featured,expression:"advertisement.is_featured"}],staticClass:"custom-control-input",class:"bg-"+t.class,attrs:{type:"checkbox",id:"is_featured"+s},domProps:{checked:Array.isArray(e.advertisement.is_featured)?e._i(e.advertisement.is_featured,null)>-1:e.advertisement.is_featured},on:{change:function(t){var i=e.advertisement.is_featured,s=t.target,a=!!s.checked;if(Array.isArray(i)){var r=e._i(i,null);s.checked?r<0&&e.$set(e.advertisement,"is_featured",i.concat([null])):r>-1&&e.$set(e.advertisement,"is_featured",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.advertisement,"is_featured",a)}}}),e._v(" "),i("label",{staticClass:"custom-control-label",attrs:{for:"is_featured"+s,"data-on-label":t.activeLabel,"data-off-label":t.inactiveLabel}})])])]}))],2),e._v(" "),i("b-form-group",{staticClass:"col-md-3",attrs:{label:"Bloquear comentarios","label-for":"title"}},[e._l(e.text,(function(t,s){return[i("div",{key:s,staticClass:"custom-control custom-switch custom-switch-text custom-control-inline custom-switch-color"},[i("div",{staticClass:"custom-switch-inner"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.advertisement.block_comments,expression:"advertisement.block_comments"}],staticClass:"custom-control-input",class:"bg-"+t.class,attrs:{type:"checkbox",id:"block_comments"+s},domProps:{checked:Array.isArray(e.advertisement.block_comments)?e._i(e.advertisement.block_comments,null)>-1:e.advertisement.block_comments},on:{change:function(t){var i=e.advertisement.block_comments,s=t.target,a=!!s.checked;if(Array.isArray(i)){var r=e._i(i,null);s.checked?r<0&&e.$set(e.advertisement,"block_comments",i.concat([null])):r>-1&&e.$set(e.advertisement,"block_comments",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.advertisement,"block_comments",a)}}}),e._v(" "),i("label",{staticClass:"custom-control-label",attrs:{for:"block_comments"+s,"data-on-label":t.activeLabel,"data-off-label":t.inactiveLabel}})])])]}))],2),e._v(" "),i("b-form-group",{staticClass:"col-md-3",attrs:{label:"Correo masivo","label-for":"title"}},[e._l(e.text,(function(t,s){return[i("div",{key:s,staticClass:"custom-control custom-switch custom-switch-text custom-control-inline custom-switch-color"},[i("div",{staticClass:"custom-switch-inner"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.advertisement.massive_mail,expression:"advertisement.massive_mail"}],staticClass:"custom-control-input",class:"bg-"+t.class,attrs:{type:"checkbox",id:"massive_mail"+s},domProps:{checked:Array.isArray(e.advertisement.massive_mail)?e._i(e.advertisement.massive_mail,null)>-1:e.advertisement.massive_mail},on:{change:function(t){var i=e.advertisement.massive_mail,s=t.target,a=!!s.checked;if(Array.isArray(i)){var r=e._i(i,null);s.checked?r<0&&e.$set(e.advertisement,"massive_mail",i.concat([null])):r>-1&&e.$set(e.advertisement,"massive_mail",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(e.advertisement,"massive_mail",a)}}}),e._v(" "),i("label",{staticClass:"custom-control-label",attrs:{for:"massive_mail"+s,"data-on-label":t.activeLabel,"data-off-label":t.inactiveLabel}})])])]}))],2),e._v(" "),i("div",{staticClass:"form-group col-md-12",attrs:{label:"Descripcion","label-for":"title"}},[i("label",{staticClass:"d-block",attrs:{for:"description"}},[e._v("Descripción -\n          "),i("span",{staticClass:"text-sm-left text-muted font-italic"},[e._v("opcional")])]),e._v(" "),i("quill-editor",{ref:"myQuillEditor",attrs:{options:e.editorOption},model:{value:e.advertisement.description,callback:function(t){e.$set(e.advertisement,"description",t)},expression:"advertisement.description"}})],1),e._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"add-img-user profile-img-edit"},[i("b-img",{staticClass:"profile-pic height-150 width-150",attrs:{fluid:"",src:e.getImagePreview(),alt:"profile-pic"}}),e._v(" "),i("div",{staticClass:"p-image"},[i("b-button",{attrs:{size:"sm",variant:"outline-primary"}},[i("input",{staticClass:"h-100 position-absolute",staticStyle:{opacity:"0"},attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}}),e._v("\n              Subir imagen\n            ")])],1)],1)]),e._v(" "),i("b-col",{staticClass:"text-right mt-4",attrs:{md:"12"}},[i("b-button",{attrs:{variant:"primary",type:"submit"}},[e._v("Guardar")])],1)],1)],1)]}}])})}),[],!1,null,"476fd59b",null);t.a=m.exports}}]);
//# sourceMappingURL=advertisement-detail.dc4fb94dcb3d642e32c5.js.map