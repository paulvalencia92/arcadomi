(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{117:function(e,t,r){e.exports=r.p+"images/user-11.png?889f24898432556cb37f2241a522210a"},226:function(e,t,r){e.exports=r.p+"images/37.png?53c74d1bcb72304b72c68c8fef9f7cbd"},702:function(e,t,r){"use strict";r.r(t);var i=r(3),a=r(2);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={name:"FormCategory",props:["category","modalTitle","image"],created:function(){this.imagePreview=clone(this.image)},data:function(){return{optionsPermissions:[{text:"Libre: Los residentes pueden publicar libremente.",value:1},{text:"Administrado: Los residentes pueden publicar y el administrador debe aprobar.",value:2},{text:"Solo administrador: Solo el administrador puede publicar.",value:3}],imagePreview:""}},methods:n(n({},Object(a.b)("AdvertisementCategory",["createAdvertisementCategories","updateAdvertisementCategories"])),{},{onSubmit:function(){var e=this,t=this.buildFormData();t.get("id")?this.updateAdvertisementCategories(t).then((function(t){i.c.showSnackbar("success","La categoria ha sido actualizada con éxito."),e.$bvModal.hide("form-advertisement-category")})):this.createAdvertisementCategories(t).then((function(t){i.c.showSnackbar("success","La categoria ha sido creado con éxito."),e.$bvModal.hide("form-advertisement-category")}))},previewImage:function(e){var t=this;this.category.file=e.target.files[0];var r=e.target;if(r.files&&r.files[0]){var i=new FileReader;i.onload=function(e){t.imagePreview=e.target.result},i.readAsDataURL(r.files[0])}},buildFormData:function(){var e=new FormData;for(var t in this.category)""!=this.category[t]&&null!=this.category[t]&&e.append(t,this.category[t]);return e},getImagePreview:function(){return this.imagePreview?this.imagePreview:this.category.image?"/storage/advertisement_categories/".concat(this.category.image):r(117)}}),computed:n({},Object(a.e)(["errors"]))},l=r(0),d=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.handleSubmit;return[r("b-form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),i(e.onSubmit)}}},[e.errors.length?r("card-errors"):e._e(),e._v(" "),r("b-form-group",{staticClass:"form-group",attrs:{label:"Nombre","label-for":"name"}},[r("ValidationProvider",{attrs:{name:"nombre del bloque",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[r("b-form-input",{class:i.length>0?" is-invalid":"",attrs:{id:"name"},model:{value:e.category.name,callback:function(t){e.$set(e.category,"name",t)},expression:"category.name"}}),e._v(" "),r("div",{staticClass:"invalid-feedback"},[r("span",[e._v(e._s(i[0]))])])]}}],null,!0)})],1),e._v(" "),r("b-form-group",{attrs:{label:"Permisos","label-for":"optionsPermissions"}},[r("ValidationProvider",{attrs:{name:"permisos",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[r("b-form-select",{class:i.length>0?" is-invalid":"",attrs:{plain:"",options:e.optionsPermissions,id:"optionsPermissions"},model:{value:e.category.permission,callback:function(t){e.$set(e.category,"permission",t)},expression:"category.permission"}}),e._v(" "),r("div",{staticClass:"invalid-feedback"},[r("span",[e._v(e._s(i[0]))])])]}}],null,!0)})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"d-block",attrs:{for:"description"}},[e._v("Descripción - "),r("span",{staticClass:"text-sm-left text-muted font-italic"},[e._v("opcional")])]),e._v(" "),r("b-form-textarea",{attrs:{id:"description",rows:"3","max-rows":"6"},model:{value:e.category.description,callback:function(t){e.$set(e.category,"description",t)},expression:"category.description"}})],1),e._v(" "),r("b-form-group",{staticClass:"mt-3"},[r("div",{staticClass:"add-img-user profile-img-edit"},[r("b-img",{staticClass:"profile-pic height-150 width-150",attrs:{fluid:"",src:e.getImagePreview(),alt:"profile-pic"}}),e._v(" "),r("div",{staticClass:"p-image"},[r("b-button",{attrs:{size:"sm",variant:"outline-primary"}},[r("input",{staticClass:"h-100 position-absolute",staticStyle:{opacity:"0"},attrs:{type:"file",accept:"image/*"},on:{change:e.previewImage}}),e._v("\n            Subir imagen\n          ")])],1)],1)]),e._v(" "),r("b-form-group",{staticClass:"mt-4 text-right"},[r("hr"),e._v(" "),r("b-button",{attrs:{variant:"primary",type:"submit"}},[e._v("Guardar")])],1)],1)]}}])})}),[],!1,null,"5f1ed4e0",null).exports,m=r(144),u=r.n(m);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={name:"CategoryApp",created:function(){this.getAdvertisementCategories()},components:{form_category:d},data:function(){return{category:{name:"",permission:"",description:"",image:"",file:""},modalTitle:"",imagePreview:r(226),fields:[{key:"name",label:"Nombre",sortable:!0},{key:"permissions",label:"Permisos",sortable:!0},{key:"actions",label:"Acciones",sortable:!0}]}},methods:g(g({},Object(a.b)("AdvertisementCategory",["getAdvertisementCategories","deleteAdvertisementCategories"])),{},{showModalCreateAdvertisementCategory:function(){this.category=u()(this.category,(function(){return""})),this.modalTitle="Crear categoria"},showModalEditAdvertisementCategory:function(e){this.category=clone(e),this.modalTitle="Editar categoria",this.imagePreview=null},showModalDeleteAdvertisementCategory:function(e){var t=this;this.$bvModal.msgBoxConfirm("Esta seguro que desea eliminar la categoria ?",{buttonSize:"sm",okVariant:"danger",okTitle:"Eliminar",cancelTitle:"Cancelar",hideHeaderClose:!1,centered:!0}).then((function(r){r&&t.deleteAdvertisementCategories(e).then((function(e){i.c.showSnackbar("success","La categoria ha sido eliminada con éxito.")}))}))}}),computed:g({},Object(a.e)("AdvertisementCategory",["advertisementCategories"])),mounted:function(){i.c.index()}},v=Object(l.a)(b,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("iq-card",{scopedSlots:e._u([{key:"headerTitle",fn:function(){return[r("i",{staticClass:"ri-user-settings-line mr-2 text-success"}),e._v(" "),r("span",[e._v("Categorías")])]},proxy:!0},{key:"headerAction",fn:function(){return[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.form-advertisement-category",modifiers:{"form-advertisement-category":!0}}],attrs:{variant:"primary"},on:{click:e.showModalCreateAdvertisementCategory}},[e._v("\n        Crear categoría\n      ")])]},proxy:!0}])}),e._v(" "),e.advertisementCategories.length?r("iq-card",{scopedSlots:e._u([{key:"body",fn:function(){return[r("b-table",{attrs:{fields:e.fields,items:e.advertisementCategories,responsive:""},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[r("b-dropdown",{staticClass:"m-md-2",attrs:{variant:"primary",id:"accion-unit",text:"Acciones"}},[r("b-dropdown-item",{directives:[{name:"b-modal",rawName:"v-b-modal.form-advertisement-category",modifiers:{"form-advertisement-category":!0}}],attrs:{variant:"primary"},on:{click:function(r){return e.showModalEditAdvertisementCategory(t.item)}}},[r("i",{staticClass:"ri-edit-box-line"}),e._v("\n              Editar\n            ")]),e._v(" "),r("b-dropdown-item",{attrs:{variant:"danger"},on:{click:function(r){return e.showModalDeleteAdvertisementCategory(t.item.id)}}},[r("i",{staticClass:"fa fa-trash"}),e._v(" Eliminar\n            ")])],1)]}}],null,!1,2335913851)})]},proxy:!0}],null,!1,3497395842)}):e._e(),e._v(" "),r("b-modal",{attrs:{id:"form-advertisement-category",centered:"",size:"lg",title:e.modalTitle,"hide-footer":""}},[r("form_category",{attrs:{category:e.category,image:e.imagePreview}})],1)],1)}),[],!1,null,"6a201554",null);t.default=v.exports}}]);
//# sourceMappingURL=advertisement-category-app.4cb71b4c013b8f2538e0.js.map