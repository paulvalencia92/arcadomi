(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1025:function(t,e,n){"use strict";n.r(e);var r=n(19),i=n(15);n(517);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={name:"FormUnitEdit",props:["unit"],components:{"model-select":n(342).ModelSelect},methods:{onSubmit:function(){this.$emit("save",this.unit)}},computed:a(a(a(a(a({},Object(i.e)(["errors"])),Object(i.c)("TypeUnits",["optionsTypeUnits"])),Object(i.c)("Block",["optionsTypeBlock"])),Object(i.e)("Block",["blocks"])),Object(i.c)("User",["optionsRolePropietario"]))},l=n(9);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={name:"ItemUnit",components:{"form-unit-edit":Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return[n("b-form",{on:{submit:function(e){return e.preventDefault(),r(t.onSubmit)}}},[n("iq-card",{scopedSlots:t._u([{key:"body",fn:function(){return[n("b-row",[n("b-col",{attrs:{md:"12"}},[t.errors.length?n("card-errors"):t._e()],1),t._v(" "),n("b-form-group",{staticClass:"col-md-6",attrs:{label:"Numero de unidad:","label-for":"mobno"}},[n("ValidationProvider",{attrs:{name:"Numero de unidad",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text"},model:{value:t.unit.number,callback:function(e){t.$set(t.unit,"number",e)},expression:"unit.number"}}),t._v(" "),n("div",{staticClass:"invalid-feedback"},[n("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),t._v(" "),n("b-form-group",{staticClass:"col-md-6",attrs:{label:"Nombre de la unidad:","label-for":"mobno"}},[n("ValidationProvider",{attrs:{name:"Nombre de la unidad:",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("b-form-input",{class:r.length>0?" is-invalid":"",attrs:{type:"text"},model:{value:t.unit.name,callback:function(e){t.$set(t.unit,"name",e)},expression:"unit.name"}}),t._v(" "),n("div",{staticClass:"invalid-feedback"},[n("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),t._v(" "),n("b-form-group",{staticClass:"col-md-6",attrs:{label:"Tipo de unidad:","label-for":"selectypeunit"}},[n("ValidationProvider",{attrs:{name:"Rol",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors;return[n("b-form-select",{class:r.length>0?" is-invalid":"",attrs:{plain:"",options:t.optionsTypeUnits,id:"selectypeunit"},model:{value:t.unit.type_unit_id,callback:function(e){t.$set(t.unit,"type_unit_id",e)},expression:"unit.type_unit_id"}}),t._v(" "),n("div",{staticClass:"invalid-feedback"},[n("span",[t._v(t._s(r[0]))])])]}}],null,!0)})],1),t._v(" "),n("b-form-group",{staticClass:"col-md-6",attrs:{label:"Bloque:","label-for":"selectypeblock"}},[n("b-form-select",{attrs:{plain:"",options:t.optionsTypeBlock,id:"selectypeblock"},scopedSlots:t._u([t.blocks.length?null:{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{value:null}},[t._v("Aun no se han registrado ningun bloque\n                ")])]},proxy:!0}],null,!0),model:{value:t.unit.block_id,callback:function(e){t.$set(t.unit,"block_id",e)},expression:"unit.block_id"}})],1),t._v(" "),n("b-col",{staticClass:"text-right mt-4",attrs:{md:"12"}},[n("b-button",{attrs:{variant:"primary",type:"submit"}},[t._v("Guardar")])],1)],1)]},proxy:!0}],null,!0)})],1)]}}])})}),[],!1,null,"6dd4765a",null).exports},props:["unit"],data:function(){return{drafUnit:{}}},methods:d(d({},Object(i.b)("Unit",["updateUnit","deleteUnit"])),{},{modalEditUnit:function(){this.drafUnit=clone(this.unit),this.$refs.edit_unit.show()},editUnit:function(t){var e=this;this.updateUnit(t).then((function(t){r.c.showSnackbar("success","Unidad actualizada correctamente"),e.$refs.edit_unit.hide()}))},modalDeleteUnit:function(){var t=this;this.$bvModal.msgBoxConfirm("¿ Esta seguro que desea eliminar la unidad ?",{buttonSize:"sm",okVariant:"danger",okTitle:"Eliminar",cancelTitle:"Cancelar",hideHeaderClose:!1,centered:!0}).then((function(e){e&&t.deleteUnit(t.unit.id).then((function(t){r.c.showSnackbar("success","La unidad ha sido eliminada correctamente")}))}))}})};n(936);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y={name:"ListUnit",components:{"detail-unit":Object(l.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("iq-card",{staticClass:"bg-transparent shadow-none",attrs:{bodyClass:"pro-bg-card",headerClass:"bg-primary"},scopedSlots:t._u([{key:"headerTitle",fn:function(){return[n("h5",{staticClass:"text-white"},[t._v("Nombre "),n("b",[t._v(t._s(t.unit.name))])])]},proxy:!0},{key:"headerAction",fn:function(){return[n("i",{staticClass:"ri-delete-bin-line mr-0 font-size-18 mr-2 clickeable",on:{click:function(e){return e.stopPropagation(),t.modalDeleteUnit(e)}}}),t._v(" "),n("i",{staticClass:"ri-ball-pen-line mr-0 font-size-18 clickeable",on:{click:function(e){return e.stopPropagation(),t.modalEditUnit(e)}}})]},proxy:!0},{key:"body",fn:function(){return[n("p",[t._v("Tipo de unidad: "+t._s(t.unit.type_unit.name))]),t._v(" "),n("p",[t._v("Numero: "+t._s(t.unit.number))]),t._v(" "),t.unit.block?n("p",[t._v("Bloque: "+t._s(t.unit.block.name))]):t._e(),t._v(" "),n("p",[t._v("Usuarios: "+t._s(t.unit.users_count))]),t._v(" "),n("b-dropdown",{staticClass:"m-md-2",attrs:{variant:"primary",id:"accion-unit",text:"Acciones"}},[n("b-dropdown-item",[t._v("Ver como unidad")]),t._v(" "),n("b-dropdown-item",{attrs:{to:"/unidades/"+t.unit.id+"/configuracion"}},[t._v("Configuración")])],1)]},proxy:!0}])}),t._v(" "),n("b-modal",{ref:"edit_unit",attrs:{size:"lg",centered:"",title:"Editar unidad","hide-footer":""}},[n("form-unit-edit",{attrs:{unit:t.drafUnit},on:{save:t.editUnit}})],1)],1)}),[],!1,null,"795b409e",null).exports},mounted:function(){this.getUnits(),r.c.index()},methods:m({},Object(i.b)("Unit",["getUnits"])),computed:m({},Object(i.e)("Unit",["units"]))},_=Object(l.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{attrs:{sm:"12"}},[e("iq-card",[e("div",{staticClass:"row"},[e("b-col",{attrs:{md:"10"}},[e("BreadCrumb")],1),this._v(" "),e("b-col",{staticClass:"d-flex align-items-center",attrs:{md:"2"}},[e("b-button",{staticClass:"mr-3",attrs:{pill:"",variant:"primary",block:""}},[e("b-link",{staticClass:"text-white",attrs:{to:{name:"unit.add"}}},[this._v("Crear unidad")])],1)],1)],1)])],1),this._v(" "),this._l(this.units,(function(t,n){return e("b-col",{key:n,attrs:{md:"4"}},[e("detail-unit",{attrs:{unit:t}})],1)}))],2)],1)}),[],!1,null,"cf825600",null);e.default=_.exports},333:function(t,e,n){var r=n(937);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(46)(r,i);r.locals&&(t.exports=r.locals)},936:function(t,e,n){"use strict";var r=n(333);n.n(r).a},937:function(t,e,n){(e=n(32)(!1)).push([t.i,".clickeable[data-v-795b409e]{cursor:pointer}",""]),t.exports=e}}]);
//# sourceMappingURL=list-unit.1aef9ef07e3d0599e38e.js.map